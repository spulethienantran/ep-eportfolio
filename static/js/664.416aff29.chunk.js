"use strict";(self.webpackChunkeporfolio_frontend=self.webpackChunkeporfolio_frontend||[]).push([[664],{6810:function(e,o,t){t.r(o),t.d(o,{default:function(){return m}});var i=t(4942),n=t(1413),a=t(9439),r=t(2791),l=t(9602),c=t(5321),s=t(6328),d=t(6850),u=t(1072),h=t(8912),p=t(3039),j=t(7689),v=t(8687),P=t(1243),g=t(3442),f=t(184);var m=(0,v.$j)((function(e){return{userData:e.user.userData}}))((function(e){var o,t=e.userData,v=null===(o=(0,j.TH)().state)||void 0===o?void 0:o.projectId,m=(0,r.useRef)(null),E=(0,r.useState)(null),Z=(0,a.Z)(E,2),C=Z[0],x=Z[1],w=(0,r.useState)(null),D=(0,a.Z)(w,2),N=D[0],b=D[1],k=(0,r.useState)(""),I=(0,a.Z)(k,2),O=I[0],U=I[1],S=240,T=240,G="/api/project/".concat(v,"/information"),y=(0,j.s0)(),A=(0,r.useState)(!1),H=(0,a.Z)(A,2),W=H[0],R=H[1],Y=(0,r.useState)(""),F=(0,a.Z)(Y,2),K=F[0],X=F[1],B=(0,r.useState)({}),J=(0,a.Z)(B,2),L=J[0],M=J[1],_=(0,r.useState)({}),V=(0,a.Z)(_,2),$=V[0],q=V[1];(0,r.useEffect)((function(){P.Z.get(G,{headers:{"X-API-KEY":g.b.key}}).then((function(e){var o=JSON.stringify(e.data.responseObject);M(JSON.parse(o))})).catch((function(e){R(!0),X(e.response.data.message)}))}),[G]),(0,r.useEffect)((function(){var e,o,i,n,a,r;console.log("Prject,",L),q({projectTitle:null===L||void 0===L?void 0:L.projectTitle,encodePhoto:null===L||void 0===L||null===(e=L.projectPhoto)||void 0===e?void 0:e.photoEncode64,photoOGHeight:null===L||void 0===L||null===(o=L.projectPhoto)||void 0===o?void 0:o.photoOGHeight,photoOGWidth:null===L||void 0===L||null===(i=L.projectPhoto)||void 0===i?void 0:i.photoOGWidth,idUserEdit:null===t||void 0===t?void 0:t.userId,projectCollaborators:null===L||void 0===L?void 0:L.projectCollaborators,projectDescription:null===L||void 0===L?void 0:L.projectDescription}),b(null===L||void 0===L||null===(n=L.projectPhoto)||void 0===n?void 0:n.photoOGHeight),x(null===L||void 0===L||null===(a=L.projectPhoto)||void 0===a?void 0:a.photoOGWidth),console.log($),U(null===L||void 0===L||null===(r=L.projectPhoto)||void 0===r?void 0:r.photoEncode64)}),[L]);var z=function(){m.current.click()},Q=function(e,o){W&&R(!1),q((0,n.Z)((0,n.Z)({},$),{},(0,i.Z)({},e,o)))};return(0,f.jsxs)("div",{className:"wrapper EditPostProjectPage-Wrapper",children:[(0,f.jsx)(c.Z,{}),(0,f.jsx)("div",{className:"EditPostProjectPage-ContentContainer",children:(0,f.jsxs)("div",{className:"EditPostProjectPage-Content",children:[(0,f.jsx)("p",{className:"heading-1 EditPostProjectPage-Title",children:"Edit Your Project"}),(0,f.jsxs)("div",{className:"EditPostProjectPage-UploadPhotoContainer",children:[(0,f.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:m,onChange:function(e){var o=e.target.files[0];if(o){var t=new FileReader,i=new Image;i.onload=function(){var e=document.createElement("canvas"),o=i.width,t=i.height;(i.width>S||i.height>T)&&(i.width/S>i.height/T?(o=S,t=i.height/i.width*S):(t=T,o=i.width/i.height*T));var a=i.height,r=i.width;b(a),x(r),e.width=o,e.height=t,e.getContext("2d").drawImage(i,0,0,o,t);var l=e.toDataURL("image/jpeg",.7);q((0,n.Z)((0,n.Z)({},$),{},{encodePhoto:l})),U(l)},t.onload=function(e){i.src=e.target.result},t.readAsDataURL(o)}}}),null===O?(0,f.jsx)(s.Z,{icon:d.VmB,className:"EditPostProjectPage-UploadPhoto",onClick:z}):(0,f.jsx)("div",{className:"EditPostProjectPage-UploadPhotoContainer",onClick:z,children:(0,f.jsx)("img",{src:O,className:"EditPostProjectPage-UploadedPhoto",alt:"Uploaded Project Banner"})})]}),W&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("p",{className:"paragraph-2 EditPostProjectPage-ErrorMessage",children:K})}),(0,f.jsxs)("div",{className:"EditPostProjectPage-Form",children:[(0,f.jsx)(h.Z,{placeholder:"Project Title",onChange:Q,name:"projectTitle",value:null===$||void 0===$?void 0:$.projectTitle}),(0,f.jsx)(l.Z,{placeholder:"Add Collaborators",isMulti:!0,name:"collaborators"}),(0,f.jsx)(p.Z,{placeholder:"Project Description",onChange:Q,name:"projectDescription",value:null===$||void 0===$?void 0:$.projectDescription})]}),(0,f.jsx)(u.Z,{title:"Update",onClick:function(){!function(e){var o={projectTitle:null===$||void 0===$?void 0:$.projectTitle,encodePhoto:O,photoOGHeight:N,photoOGWidth:C,idUserEdit:null===t||void 0===t?void 0:t.userId,projectCollaborators:null===$||void 0===$?void 0:$.projectCollaborators,projectDescription:null===$||void 0===$?void 0:$.projectDescription};console.log(o),P.Z.put(G,o,{headers:{"X-API-KEY":g.b.key}}).then((function(o){y("/Project",{state:{projectId:e}})})).catch((function(e){R(!0),X(e.response.data.message)}))}(v)},className:"EditPostProjectPage-Post"}),(0,f.jsx)(u.Z,{title:"Delete",onClick:function(){P.Z.delete("/api/project/".concat(v,"/information/").concat(t.userId),{headers:{"X-API-KEY":g.b.key}}).then((function(e){var o;o=null===t||void 0===t?void 0:t.userId,y("/Profile",{state:{userId:o}})})).catch((function(e){R(!0),X(e.response.data.message)}))}})]})})]})}))}}]);
//# sourceMappingURL=664.416aff29.chunk.js.map