{"version":3,"file":"static/js/664.416aff29.chunk.js","mappings":"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","sources":["Pages/EditProjectPostPage/EditProjectPostPage.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\n\r\nimport './EditProjectPostPage.css';\r\nimport StandardDropDown from '../../Components/DropDowns/StandardDropDown/StandardDropDown';\r\n\r\nimport NavBar from '../../Components/NavBar/NavBar';\r\nimport IconButton from '../../Components/Buttons/IconButton/IconButton';\r\nimport { faImage } from '@fortawesome/free-regular-svg-icons';\r\nimport StandardButton from '../../Components/Buttons/StandardButton/StandardButton';\r\nimport StandardTextInputField from '../../Components/InputFields/StandardTextInputField';\r\nimport StandardTextAreaInputField from '../../Components/InputFields/StandardTextAreaInputField/StandardTextAreaInputField';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { connect, useDispatch } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { API } from '../../Constants';\r\n\r\nfunction EditProjectPostPage({userData}) {\r\n\r\n  const location = useLocation();\r\n  const projectId = location.state?.projectId;\r\n\r\n  const fileInputRef = useRef(null);\r\n  const [imageOGWidth, setImageOGWidth] = useState(null);\r\n  const [imageOGHeight, setImageOGHeight] = useState(null);\r\n  const [projectBannerBase64, setProjectBannerBase64] = useState('');\r\n\r\n  const maxWidth = 240; \r\n  const maxHeight = 240; \r\n\r\n  const apiURL = `/api/project/${projectId}/information`;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [isError, setIsError] = useState(false);\r\n  \r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const [projectData, setProjectData] = useState({});\r\n\r\n  //populate\r\n  const [projectInformation, setProjectInformation] = useState ({});\r\n  \r\n  const NavigateProfile = (userId) => {\r\n    navigate('/Profile', {state: {userId}})\r\n  }\r\n\r\n  const OnDelete = () => {\r\n    axios\r\n      .delete(`/api/project/${projectId}/information/${userData.userId}`, {\r\n        headers: {\r\n          'X-API-KEY': API.key,\r\n        },\r\n      })\r\n      .then(response => {\r\n        NavigateProfile(userData?.userId);\r\n      })\r\n      .catch(error => {\r\n        setIsError(true);\r\n        setErrorMessage(error.response.data.message);\r\n      });\r\n  }\r\n\r\n  const OnUpdate = (projectId) => {\r\n    const requestBody = {\r\n      projectTitle: projectInformation?.projectTitle,\r\n      encodePhoto: projectBannerBase64,\r\n      photoOGHeight: imageOGHeight,\r\n      photoOGWidth: imageOGWidth,\r\n      idUserEdit: userData?.userId,\r\n      projectCollaborators: projectInformation?.projectCollaborators,\r\n      projectDescription: projectInformation?.projectDescription,\r\n    }\r\n    console.log(requestBody);\r\n    axios\r\n      .put(apiURL, requestBody, {\r\n        headers: {\r\n          'X-API-KEY': API.key,\r\n        },\r\n      })\r\n      .then(response => {\r\n        navigate('/Project', {state: { projectId }});\r\n      })\r\n      .catch(error => {\r\n        setIsError(true);\r\n        setErrorMessage(error.response.data.message);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(apiURL, {\r\n        headers: {\r\n          'X-API-KEY': API.key,\r\n        }\r\n      })\r\n      .then(response => {\r\n        const JSONFormat = JSON.stringify(response.data.responseObject);\r\n        setProjectData(JSON.parse(JSONFormat));\r\n      })\r\n      .catch(error => {\r\n        setIsError(true);\r\n        setErrorMessage(error.response.data.message);\r\n      })\r\n  }, [apiURL]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Prject,\", projectData);\r\n    setProjectInformation({\r\n      projectTitle: projectData?.projectTitle,\r\n      encodePhoto: projectData?.projectPhoto?.photoEncode64,\r\n      photoOGHeight: projectData?.projectPhoto?.photoOGHeight,\r\n      photoOGWidth: projectData?.projectPhoto?.photoOGWidth,\r\n      idUserEdit: userData?.userId,\r\n      projectCollaborators: projectData?.projectCollaborators,\r\n      projectDescription: projectData?.projectDescription,\r\n    })\r\n    setImageOGHeight(projectData?.projectPhoto?.photoOGHeight);\r\n    setImageOGWidth(projectData?.projectPhoto?.photoOGWidth);\r\n    console.log(projectInformation);\r\n    setProjectBannerBase64(projectData?.projectPhoto?.photoEncode64);\r\n  }, [projectData])\r\n\r\n  const HandleFileInputChange = (e) => {\r\n    const selectedFile = e.target.files[0];\r\n    if (selectedFile) {\r\n      const reader = new FileReader();\r\n      const img = new Image();\r\n  \r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas');\r\n        let newWidth = img.width;\r\n        let newHeight = img.height;\r\n  \r\n        if (img.width > maxWidth || img.height > maxHeight) {\r\n          if (img.width / maxWidth > img.height / maxHeight) {\r\n            newWidth = maxWidth;\r\n            newHeight = (img.height / img.width) * maxWidth;\r\n          } else {\r\n            newHeight = maxHeight;\r\n            newWidth = (img.width / img.height) * maxHeight;\r\n          }\r\n        }\r\n        const ogHeight = img.height;\r\n        const ogWidth = img.width;\r\n        setImageOGHeight(ogHeight);\r\n        setImageOGWidth(ogWidth);\r\n        canvas.width = newWidth;\r\n        canvas.height = newHeight;\r\n  \r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0, newWidth, newHeight);\r\n  \r\n        const base64Data = canvas.toDataURL('image/jpeg', 0.7); // Use 'image/jpeg' for JPEG format\r\n        setProjectInformation({ ...projectInformation, encodePhoto: base64Data });\r\n        setProjectBannerBase64(base64Data);\r\n\r\n      };\r\n  \r\n      reader.onload = (event) => {\r\n        img.src = event.target.result;\r\n      };\r\n  \r\n      reader.readAsDataURL(selectedFile);\r\n    }\r\n  };\r\n\r\n  const OpenFileDialog = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const HandleInputChange = (propertyName, inputValue) => {\r\n    if (isError) {\r\n      setIsError(false);\r\n    }\r\n    setProjectInformation({...projectInformation, [propertyName]: inputValue});\r\n  }\r\n\r\n  return (\r\n    <div className='wrapper EditPostProjectPage-Wrapper'>\r\n      <NavBar />\r\n      <div className='EditPostProjectPage-ContentContainer'>\r\n        <div className='EditPostProjectPage-Content'>\r\n          <p className='heading-1 EditPostProjectPage-Title'>Edit Your Project</p>\r\n          <div className='EditPostProjectPage-UploadPhotoContainer'>\r\n            <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                style={{ display: 'none' }}\r\n                ref={fileInputRef}\r\n                onChange={HandleFileInputChange}\r\n              />\r\n              {projectBannerBase64 === null ? (<IconButton icon={faImage} className='EditPostProjectPage-UploadPhoto'onClick={OpenFileDialog}/>) : (\r\n              <div className='EditPostProjectPage-UploadPhotoContainer' onClick={OpenFileDialog}>\r\n                <img src={projectBannerBase64} className='EditPostProjectPage-UploadedPhoto' alt='Uploaded Project Banner'/>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {isError && (\r\n          <>\r\n            <p className='paragraph-2 EditPostProjectPage-ErrorMessage'>{errorMessage}</p>\r\n          </>\r\n        )}\r\n          <div className='EditPostProjectPage-Form'>\r\n            <StandardTextInputField placeholder='Project Title' \r\n                                                 onChange={HandleInputChange} \r\n                                                 name='projectTitle'\r\n                                                 value={projectInformation?.projectTitle}/>\r\n            <StandardDropDown placeholder='Add Collaborators' isMulti={true} name='collaborators'/>\r\n            <StandardTextAreaInputField placeholder='Project Description' \r\n                                        onChange={HandleInputChange}\r\n                                        name='projectDescription'\r\n                                        value={projectInformation?.projectDescription}/>\r\n          </div>\r\n          <StandardButton title='Update' onClick={()=>{OnUpdate(projectId)}} className='EditPostProjectPage-Post'/>\r\n          <StandardButton title='Delete' onClick={OnDelete} />\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}\r\nconst mapStateToProps = state => ({\r\n  userData: state.user.userData,\r\n});\r\nexport default connect(mapStateToProps)(EditProjectPostPage)"],"names":["connect","state","userData","user","_ref","_location$state","projectId","useLocation","fileInputRef","useRef","_useState","useState","_useState2","_slicedToArray","imageOGWidth","setImageOGWidth","_useState3","_useState4","imageOGHeight","setImageOGHeight","_useState5","_useState6","projectBannerBase64","setProjectBannerBase64","maxWidth","maxHeight","apiURL","concat","navigate","useNavigate","_useState7","_useState8","isError","setIsError","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","projectData","setProjectData","_useState13","_useState14","projectInformation","setProjectInformation","useEffect","axios","get","headers","API","key","then","response","JSONFormat","JSON","stringify","data","responseObject","parse","catch","error","message","_projectData$projectP","_projectData$projectP2","_projectData$projectP3","_projectData$projectP4","_projectData$projectP5","_projectData$projectP6","console","log","projectTitle","encodePhoto","projectPhoto","photoEncode64","photoOGHeight","photoOGWidth","idUserEdit","userId","projectCollaborators","projectDescription","OpenFileDialog","current","click","HandleInputChange","propertyName","inputValue","_objectSpread","_defineProperty","_jsxs","className","children","_jsx","NavBar","type","accept","style","display","ref","onChange","e","selectedFile","target","files","reader","FileReader","img","Image","onload","canvas","document","createElement","newWidth","width","newHeight","height","ogHeight","ogWidth","getContext","drawImage","base64Data","toDataURL","event","src","result","readAsDataURL","IconButton","icon","faImage","onClick","alt","_Fragment","StandardTextInputField","placeholder","name","value","StandardDropDown","isMulti","StandardTextAreaInputField","StandardButton","title","requestBody","put","OnUpdate","delete"],"sourceRoot":""}